clear;clc
data1 = importdata('\PRISM\prism500m站点位置提取值.txt');
data2 = importdata('\PRISM\pre_n.txt');
data3 = importdata('\PRISM\idw国家站点验证.txt');
data4 = importdata('\PRISM\kri国家站点验证.txt');

a(1:87,1)=1700;
%mae
sum = 0;
for i = 1:87
    sum = abs(a(i,1)-a(i,2))+sum;
end
mae = sum/87
    %rmse 
    sum = 0;
for i = 1:87
    sum = sum + (a(i,1) - a(i,2))^2;
end
rmse = sqrt(sum/87);

for i = 1 : length(HAspect500m)
    for j = 1 : length(pre_n)
        if distance(pre_n(j,2),pre_n(j,3),HAspect500m(i,3),HAspect500m(i,2))*pi*6371000/180 <= 200000  %计算半径
           % 计算高程权重Wz
            if abs(pre_n(j,4) - HAspect500m(i,4)) <= 100
                Wz(i,j) = 1 / 50;
            elseif abs(pre_n(j,5) - HAspect500m(i,4)) > 100 & abs(pre_n(j,5) - HAspect500m(i,4)) < 300
                Wz(i,j) = 1 / abs(pre_n(j,5) - HAspect500m(i,4));
            else
                Wz(i,j) = 0;
            end
        end
    end
end

a = [1601.44	1717.58403
1814.04	1729.678229
1766.29	1649.476805
1722.01	1661.278267
1721.84	1648.531789
1623.4	1626.630785
1624.35	1619.11174
1640.066667	1677.324778
1630.55	1670.881168
1602.256667	1669.645779
1571.94	1665.32446
1564.95	1635.744497
1625.846667	1697.133071
1572.77	1614.765152
1914.53	2024.42747
1433.81	1618.6512
1460.636667	1611.876527
1436.71	1620.384646
1594.613333	1618.019337
1493.04	1586.529772
1448.63	1586.762458
1445.553333	1573.341832
1583.473333	1589.163164
1520.353333	1567.670794
1446.083333	1676.079815
1506.016667	1633.626248
2023.486667	1939.03186
1493.51	1667.317601
1448.906667	1657.823462
1560.513333	1645.618589
1438.96	1675.249698
1485.228571	1722.815178
1462.84	1664.644216
1472.203333	1679.739191
1625.576667	1675.087917
1804.38	1697.989063
1946.21	1854.412729
1714.396667	1645.278434
1671.213333	1642.96693
1577.146667	1651.28174
1677.383333	1639.623012
1612.883333	1662.903411
1565.963158	1660.301303
1712.42	1636.295182
1660.94	1660.315077
1733.516667	1678.818876
1722.18	1673.94087
1862.063333	1753.652602
1818.553333	1820.021027
1794.44	1673.420068
1790.21	1680.150614
1825.94	1687.071499
1954.806667	1855.711984
1702.258824	1829.853599
1943.136667	1905.432967
1954.043333	1911.253369
1897.143333	1892.290279
1875.631579	1842.967741
1879.28	1769.666718
1818.42	1849.525633
1696.95	1841.705235
1846.956667	1873.161148
1593.6	1670.673337
1582.23	1647.912426
1633.943333	1656.039801
1717.04	1651.841079
1747.863333	1710.641938
1616.896667	1652.30338
1805.07	1697.994068
1842.953333	1802.033898
2000.516667	1921.605481
1830.406667	1746.105574
1735.126667	1754.894026
1761.52	1717.706468
1828.46	1794.449193
1544.36	1627.523962
1773.823333	1783.869226
1739.633333	1702.758053
1756.193333	1791.67631
1651.73	1623.404865
1544.03	1607.265719
1624.15	1599.423102
1569.05	1590.862411
1664.713333	1597.178035
1541.653333	1581.117849
1585.81	1597.178035
1605.693333	1535.315435
]

